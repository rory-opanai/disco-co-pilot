(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{1991:function(e,s,l){Promise.resolve().then(l.bind(l,6373))},6373:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return t},dynamic:function(){return c}});var a=l(7821),i=l(8078),d=l(8504);let c="force-dynamic";function t(){var e,s,l,c,t,n,o,r;let{sessionId:m}=(0,d.useParams)(),[u,h]=(0,i.useState)(null),[x,v]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{v(!0);let e=await fetch("/api/postcall/".concat(m));h(await e.json()),v(!1)})()},[m,""]);let j=async e=>{let s=new FormData;s.append("audio",e);let l=await fetch("/api/postcall/".concat(m),{method:"POST",body:s});h(await l.json())};if(x)return(0,a.jsx)("div",{children:"Loading..."});if(!u)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-slate-700",children:"No data yet for this session."}),(0,a.jsxs)("label",{className:"inline-block",children:["Upload call audio",(0,a.jsx)("input",{type:"file",accept:"audio/*",className:"block mt-1",onChange:e=>e.target.files&&j(e.target.files[0])})]})]});let{transcript:p,summary:N}=u;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Post-Call Summary"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Discovery Depth Score"}),(0,a.jsx)("div",{className:"p-4 border rounded",children:(null==N?void 0:N.discovery_depth_score)?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-4xl font-bold",children:[N.discovery_depth_score.percentage,"%"]}),(0,a.jsx)("div",{className:"text-slate-600",children:N.discovery_depth_score.interpretation})]}):(0,a.jsx)("div",{className:"text-slate-600",children:"Not available"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Coverage"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:(null==N?void 0:null===(e=N.coverage_table)||void 0===e?void 0:e.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded p-2",children:[(0,a.jsx)("div",{className:"font-medium",children:e.category}),(0,a.jsxs)("div",{className:"text-sm",children:["Status: ",e.status]})]},s)))||(0,a.jsx)("div",{className:"text-slate-500",children:"No coverage computed"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Missed Questions & Risks"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"border rounded p-3",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Missed Questions"}),(0,a.jsx)("ul",{className:"list-disc ml-5 space-y-1",children:(null==N?void 0:null===(s=N.missed_questions)||void 0===s?void 0:s.map((e,s)=>(0,a.jsxs)("li",{children:[e.question," ",(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:["(",e.expected_category,")"]})]},s)))||(0,a.jsx)("div",{className:"text-slate-500",children:"None"})})]}),(0,a.jsxs)("div",{className:"border rounded p-3",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Risks & Blockers"}),(0,a.jsx)("ul",{className:"list-disc ml-5 space-y-1",children:(null==N?void 0:null===(l=N.risks_and_blockers)||void 0===l?void 0:l.map((e,s)=>(0,a.jsxs)("li",{children:[e.description," ",(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:["(",e.impact_level,")"]})]},s)))||(0,a.jsx)("div",{className:"text-slate-500",children:"None"})})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Recommended Agenda"}),(0,a.jsx)("ol",{className:"list-decimal ml-5 space-y-1",children:(null==N?void 0:null===(c=N.recommended_agenda)||void 0===c?void 0:c.map((e,s)=>(0,a.jsxs)("li",{children:[e.agenda_item," â€“ ",(0,a.jsx)("span",{className:"text-slate-600",children:e.objective})]},s)))||(0,a.jsx)("div",{className:"text-slate-500",children:"None"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Draft Follow-up Email"}),(0,a.jsxs)("div",{className:"border rounded p-3 space-y-2",children:[(0,a.jsx)("div",{className:"font-medium",children:(null==N?void 0:null===(t=N.follow_up_email)||void 0===t?void 0:t.subject)||"No subject"}),(0,a.jsx)("textarea",{className:"w-full border rounded p-2 h-40",defaultValue:(null==N?void 0:null===(n=N.follow_up_email)||void 0===n?void 0:n.body)||""}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Action Items: ",(null==N?void 0:null===(r=N.follow_up_email)||void 0===r?void 0:null===(o=r.action_items)||void 0===o?void 0:o.join(", "))||"None"]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Generate Summary"}),(0,a.jsxs)("label",{className:"inline-block",children:["Upload call audio",(0,a.jsx)("input",{type:"file",accept:"audio/*",className:"block mt-1",onChange:e=>e.target.files&&j(e.target.files[0])})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Transcript"}),(0,a.jsx)("pre",{className:"border rounded p-3 overflow-auto max-h-96 whitespace-pre-wrap",children:p||"No transcript yet."})]})]})}},8504:function(e,s,l){"use strict";var a=l(3226);l.o(a,"useParams")&&l.d(s,{useParams:function(){return a.useParams}}),l.o(a,"useRouter")&&l.d(s,{useRouter:function(){return a.useRouter}}),l.o(a,"useSearchParams")&&l.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[115,364,744],function(){return e(e.s=1991)}),_N_E=e.O()}]);