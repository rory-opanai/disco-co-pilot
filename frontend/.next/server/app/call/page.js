(()=>{var e={};e.id=293,e.ids=[293],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5530:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(8207),t(1163),t(2874);var n=t(7105),r=t(5265),a=t(157),i=t.n(a),l=t(4665),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["call",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8207)),"/Users/roryh/Github/Disco-co-pilot/disco-co-pilot/frontend/app/call/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1163)),"/Users/roryh/Github/Disco-co-pilot/disco-co-pilot/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/roryh/Github/Disco-co-pilot/disco-co-pilot/frontend/app/call/page.tsx"],u="/call/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/call/page",pathname:"/call",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3672:(e,s,t)=>{Promise.resolve().then(t.bind(t,3326))},8981:()=>{},4084:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3817,23)),Promise.resolve().then(t.t.bind(t,9323,23)),Promise.resolve().then(t.t.bind(t,2204,23)),Promise.resolve().then(t.t.bind(t,820,23)),Promise.resolve().then(t.t.bind(t,5915,23)),Promise.resolve().then(t.t.bind(t,1611,23))},3326:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p,dynamic:()=>x});var n=t(9899),r=t(5507),a=t(6153);function i({items:e}){return n.jsx("div",{className:"h-96 overflow-y-auto space-y-1",children:e.map((e,s)=>(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("span",{className:"font-medium "+("Customer"===e.speaker?"text-rose-700":"text-sky-700"),children:[e.speaker,":"]})," ",e.text]},s))})}function l({nbq:e,onAction:s,hasQueuedUpdate:t,onRefreshNow:r}){return e?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"text-sm text-slate-600",children:["Category: ",e.checklist_category]}),t?n.jsx("button",{className:"text-[10px] px-2 py-0.5 rounded bg-amber-100 text-amber-800",onClick:r,title:"A better suggestion is ready",children:"Refresh available"}):null]}),n.jsx("div",{className:"text-lg",children:e.question}),(0,n.jsxs)("div",{className:"flex gap-2",children:[n.jsx("button",{className:"bg-green-600 text-white px-3 py-1 rounded",onClick:()=>s("accept"),children:"Accept (N)"}),n.jsx("button",{className:"bg-slate-300 text-slate-900 px-3 py-1 rounded",onClick:()=>s("skip"),children:"Skip (S)"})]})]}):n.jsx("div",{className:"text-slate-500",children:"Awaiting next suggestion…"})}let o=["Pain","Impact","Current Solution","Desired Outcome","Use Case","Stakeholders","Budget","Timeline","Decision Process","Risks","Metrics","Compliance"];function c({coverage:e}){let s=(0,r.useMemo)(()=>{let s=o.length;return Math.round(o.filter(s=>["known","partial"].includes(e[s])).length/s*100)},[e]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-2",children:["Progress: ",(0,n.jsxs)("span",{className:"font-semibold",children:[s,"%"]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:o.map(s=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:function(e){switch(e){case"known":return"#16a34a";case"partial":return"#f59e0b";default:return"#9ca3af"}}(e[s])}}),n.jsx("span",{children:s})]},s))})]})}function d({sessionId:e,connected:s,transcript:t,coverage:r,nbq:a,nbqRefreshAvailable:o,onNbqRefreshNow:d,onNbqAction:u}){return(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"md:col-span-2 border rounded p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"font-semibold",children:"Live Transcript"}),n.jsx("div",{className:"text-xs "+(s?"text-green-600":"text-red-600"),children:s?"Connected":"Connecting..."})]}),n.jsx(i,{items:t})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"border rounded p-3",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Checklist Progress"}),n.jsx(c,{coverage:r})]}),(0,n.jsxs)("div",{className:"border rounded p-3",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Next Best Question"}),n.jsx(l,{nbq:a,onAction:u,hasQueuedUpdate:!!o,onRefreshNow:d}),n.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Hotkeys: N = accept, S = skip"})]})]})]})}function u({open:e,onToggle:s,events:t,onClear:a}){let i=(0,r.useRef)(null);return(0,n.jsxs)("div",{className:"border rounded",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-100",children:[n.jsx("div",{className:"font-medium",children:"Realtime Debug"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"text-xs px-2 py-1 rounded bg-slate-200",onClick:s,children:e?"Hide":"Show"}),n.jsx("button",{className:"text-xs px-2 py-1 rounded bg-slate-200",onClick:a,children:"Clear"})]})]}),e&&(0,n.jsxs)("div",{className:"max-h-64 overflow-auto p-2 text-xs font-mono",children:[0===t.length&&n.jsx("div",{className:"text-slate-500",children:"No events yet…"}),t.map((e,s)=>(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"text-slate-500",children:["[",e.t,"] ",e.type||"event"]}),n.jsx("pre",{className:"whitespace-pre-wrap break-words",children:function(e){try{return JSON.stringify(e,null,2)}catch{return String(e)}}(e.data)})]},s)),n.jsx("div",{ref:i})]})]})}let x="force-dynamic";function m(){let e=(0,a.useSearchParams)(),s=(0,a.useRouter)(),t=e.get("sessionId")||`sess_${Date.now()}`,[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)([]),[x,m]=(0,r.useState)({}),[p,h]=(0,r.useState)(null),[f,v]=(0,r.useState)(null),[b,g]=(0,r.useState)(0);(0,r.useRef)(null),(0,r.useRef)(!1);let[j,N]=(0,r.useState)(""),y=(0,r.useRef)(o);(0,r.useRef)(x),(0,r.useRef)(j);let[P,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)([]);(0,r.useRef)(0),(0,r.useRef)(!1);let[C,R]=(0,r.useState)(null);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Live Discovery"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:j,onChange:e=>N(e.target.value),placeholder:"End goal (optional): e.g., qualify for pilot",className:"text-sm border rounded px-2 py-1 w-56"}),n.jsx("button",{onClick:async()=>{let e=y.current.map(e=>`${e.speaker}: ${e.text}`).join("\n");try{let n=await fetch(`/api/finalize/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:e,goal:j})});if(!n.ok)throw Error(await n.text());s.push(`/dashboard/${t}`)}catch(e){R(e?.message||"Failed to finalize session")}},className:"bg-slate-800 text-white px-3 py-2 rounded",children:"End & Save Summary"})]})]}),C&&n.jsx("div",{className:"text-xs text-red-600",children:C}),n.jsx(d,{sessionId:t,connected:i,transcript:o,coverage:x,nbq:p,nbqRefreshAvailable:!!f,onNbqRefreshNow:()=>{f&&(function(e){let s=Date.now(),t="number"==typeof p?.confidence?p.confidence:0,n="number"==typeof e?.confidence?e.confidence:0,r=!p||n-t>=.1;if(!p){h(e),v(null),g(s+1e4);return}if(s<b){r&&v(e);return}r&&(h(e),v(null),g(s+1e4))}(f),v(null))},onNbqAction:e=>{h(null),v(null),g(0)}}),n.jsx(u,{open:P,onToggle:()=>w(e=>!e),events:S,onClear:()=>k([])})]})}function p(){return n.jsx(r.Suspense,{fallback:n.jsx("div",{children:"Loading…"}),children:n.jsx(m,{})})}},6153:(e,s,t)=>{"use strict";var n=t(1545);t.o(n,"useParams")&&t.d(s,{useParams:function(){return n.useParams}}),t.o(n,"useRouter")&&t.d(s,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(s,{useSearchParams:function(){return n.useSearchParams}})},8207:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a,dynamic:()=>r});var n=t(2772);let r=(0,n.createProxy)(String.raw`/Users/roryh/Github/Disco-co-pilot/disco-co-pilot/frontend/app/call/page.tsx#dynamic`),a=(0,n.createProxy)(String.raw`/Users/roryh/Github/Disco-co-pilot/disco-co-pilot/frontend/app/call/page.tsx#default`)},1163:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var n=t(5023);function r({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:"bg-slate-50 text-slate-900",children:n.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e})})})}t(642),t(8003)},642:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[942,371],()=>t(5530));module.exports=n})();